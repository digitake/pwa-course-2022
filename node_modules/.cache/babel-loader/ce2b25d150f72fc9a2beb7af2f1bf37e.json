{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kao\\\\Desktop\\\\GI472(\\u0E2A.)\\\\Visual Studio Code\\\\pwa-course-2022\\\\pwa-course-2022\\\\src\\\\Chat.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport App from './components/App.js';\nimport Chatbox from './components/Chatbox.js';\nimport Titlebar from './components/Titlebar.js';\nimport Userlist from './components/Userlist.js';\nimport Inputbox from './components/Inputbox.js';\nimport './Chat.css';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider';\nimport { useAuthStateContext } from './context/FirebaseAuthContextProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chat() {\n  _s();\n\n  const {\n    sendMsg,\n    listenToChatroom\n  } = useChatStateContext();\n  const {\n    authState\n  } = useAuthStateContext();\n  let [chatData, setChatData] = useState([{\n    user: \"user1\",\n    msg: \"Hello\",\n    position: \"left\"\n  }, {\n    user: \"user2\",\n    msg: \"Hi\",\n    position: \"right\"\n  }, {\n    user: \"user1\",\n    msg: \"How are you?\",\n    position: \"left\"\n  }, {\n    user: \"user2\",\n    msg: \"I'm fine, thank you. And you?\",\n    position: \"right\"\n  }]);\n\n  const onMsg = msg => {\n    const mappedValue = { ...msg,\n      key: msg.timestamp || Date.now(),\n      position: msg.user === authState.user.uid ? \"right\" : \"left\"\n    };\n    setChatData(oldChat => [mappedValue, ...oldChat]);\n  };\n\n  useEffect(() => {\n    const unsubscribePrivateChat = listenToChatroom('mainhall', onMsg);\n    return () => {\n      unsubscribePrivateChat();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(App, {\n    children: [/*#__PURE__*/_jsxDEV(Userlist, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: [/*#__PURE__*/_jsxDEV(Titlebar, {\n        value: \"Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Chatbox, {\n        data: chatData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Inputbox, {\n        onEnter: x => sendMsg(x, \"mainhall\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chat, \"SXw6fEAAi+QORpVvbO5FetREhVU=\", false, function () {\n  return [useChatStateContext, useAuthStateContext];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["C:/Users/Kao/Desktop/GI472(à¸ª.)/Visual Studio Code/pwa-course-2022/pwa-course-2022/src/Chat.js"],"names":["useEffect","useState","App","Chatbox","Titlebar","Userlist","Inputbox","useChatStateContext","useAuthStateContext","Chat","sendMsg","listenToChatroom","authState","chatData","setChatData","user","msg","position","onMsg","mappedValue","key","timestamp","Date","now","uid","oldChat","unsubscribePrivateChat","x"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAO,YAAP;AACA,SAASC,mBAAT,QAAoC,uCAApC;AACA,SAASC,mBAAT,QAAoC,uCAApC;;;AAEA,SAASC,IAAT,GAAgB;AAAA;;AACd,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAgCJ,mBAAmB,EAAzD;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAgBJ,mBAAmB,EAAzC;AAEA,MAAI,CAACK,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,CACrC;AAACc,IAAAA,IAAI,EAAE,OAAP;AAAgBC,IAAAA,GAAG,EAAE,OAArB;AAA8BC,IAAAA,QAAQ,EAAE;AAAxC,GADqC,EAErC;AAACF,IAAAA,IAAI,EAAE,OAAP;AAAgBC,IAAAA,GAAG,EAAE,IAArB;AAA2BC,IAAAA,QAAQ,EAAE;AAArC,GAFqC,EAGrC;AAACF,IAAAA,IAAI,EAAE,OAAP;AAAgBC,IAAAA,GAAG,EAAE,cAArB;AAAqCC,IAAAA,QAAQ,EAAE;AAA/C,GAHqC,EAIrC;AAACF,IAAAA,IAAI,EAAE,OAAP;AAAgBC,IAAAA,GAAG,EAAE,+BAArB;AAAsDC,IAAAA,QAAQ,EAAE;AAAhE,GAJqC,CAAD,CAAtC;;AAOA,QAAMC,KAAK,GAAIF,GAAD,IAAS;AAErB,UAAMG,WAAW,GAAG,EAClB,GAAGH,GADe;AAElBI,MAAAA,GAAG,EAAEJ,GAAG,CAACK,SAAJ,IAAiBC,IAAI,CAACC,GAAL,EAFJ;AAGlBN,MAAAA,QAAQ,EAAED,GAAG,CAACD,IAAJ,KAAaH,SAAS,CAACG,IAAV,CAAeS,GAA5B,GAAkC,OAAlC,GAA4C;AAHpC,KAApB;AAMAV,IAAAA,WAAW,CAACW,OAAO,IAAI,CAACN,WAAD,EAAc,GAAGM,OAAjB,CAAZ,CAAX;AACD,GATD;;AAWAzB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM0B,sBAAsB,GAAGf,gBAAgB,CAAC,UAAD,EAAaO,KAAb,CAA/C;AAEA,WAAO,MAAM;AAACQ,MAAAA,sBAAsB;AAAG,KAAvC;AACD,GAJQ,EAIN,EAJM,CAAT;AAOA,sBACE,QAAC,GAAD;AAAA,4BACE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACE,QAAC,QAAD;AAAU,QAAA,KAAK,EAAC;AAAhB;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,OAAD;AAAS,QAAA,IAAI,EAAEb;AAAf;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE,QAAC,QAAD;AAAU,QAAA,OAAO,EAAEc,CAAC,IAAEjB,OAAO,CAACiB,CAAD,EAAG,UAAH;AAA7B;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAUD;;GAvCQlB,I;UAC+BF,mB,EAChBC,mB;;;KAFfC,I;AAyCT,eAAeA,IAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport App from './components/App.js';\nimport Chatbox from './components/Chatbox.js';\nimport Titlebar from './components/Titlebar.js';\nimport Userlist from './components/Userlist.js';\nimport Inputbox from './components/Inputbox.js';\nimport './Chat.css';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider';\nimport { useAuthStateContext } from './context/FirebaseAuthContextProvider';\n\nfunction Chat() {\n  const { sendMsg, listenToChatroom } = useChatStateContext();\n  const { authState } = useAuthStateContext();\n\n  let [chatData, setChatData] = useState([\n    {user: \"user1\", msg: \"Hello\", position: \"left\"},\n    {user: \"user2\", msg: \"Hi\", position: \"right\"},\n    {user: \"user1\", msg: \"How are you?\", position: \"left\"},\n    {user: \"user2\", msg: \"I'm fine, thank you. And you?\", position: \"right\"},\n  ]);\n\n  const onMsg = (msg) => {\n    \n    const mappedValue = {\n      ...msg,\n      key: msg.timestamp || Date.now(),\n      position: msg.user === authState.user.uid ? \"right\" : \"left\"\n    };\n    \n    setChatData(oldChat => [mappedValue, ...oldChat]);\n  }\n\n  useEffect(() => {\n    const unsubscribePrivateChat = listenToChatroom('mainhall', onMsg);\n\n    return () => {unsubscribePrivateChat()}\n  }, []);\n\n\n  return (\n    <App>\n      <Userlist />\n      <div className=\"chat\">\n        <Titlebar value=\"Chat\"/>        \n        <Chatbox data={chatData}/>\n        <Inputbox onEnter={x=>sendMsg(x,\"mainhall\")}/>\n      </div>\n    </App>\n  );\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}