{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kao\\\\Desktop\\\\GI472(\\u0E2A.)\\\\Visual Studio Code\\\\pwa-course-2022\\\\pwa-course-2022\\\\src\\\\context\\\\FirebaseAuthContextProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { firebase } from \"./FirebaseConfig\";\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AUTHENTICATION_LOADING = \"AUTHENTICATION_LOADING\";\nexport const AUTHENTICATED = \"AUTHENTICATED\";\nexport const AUTHENTICATED_ANONYMOUSLY = \"AUTHENTICATED_ANONYMOUSLY\";\nexport const UNAUTHENTICATED = \"UNAUTHENTICATED\";\nexport const AUTHENTICATION_FAILED = \"AUTHENTICATION_FAILED\";\nconst AuthStateContext = /*#__PURE__*/createContext({\n  user: {},\n  state: AUTHENTICATION_LOADING\n});\nexport default function AuthStateProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [authState, setAuthState] = useState({\n    user: undefined,\n    state: AUTHENTICATION_LOADING\n  });\n  useEffect(() => {\n    const unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\n      setAuthState({\n        user: user,\n        state: user ? AUTHENTICATED : UNAUTHENTICATED\n      });\n    });\n    return () => unregisterAuthObserver(); // eslint-disable-next-line\n  }, []);\n\n  const signOut = () => firebase.auth().signOut();\n\n  const signUpWithEmailAndPassword = (email, password, name, callback, onError) => {\n    const expandedOnError = error => {\n      // If there is an error with the login we will rollback to the last auth state.\n      setAuthState(authState);\n      onError && onError(error);\n    };\n\n    firebase.auth().signUpWithEmailAndPassword(email, password, name, setAuthState, callback, expandedOnError);\n  };\n\n  const signInWithEmailAndPassword = (email, password, callback, onError) => {\n    const expandedOnError = error => {\n      // If there is an error with the login we will rollback to the last auth state.\n      setAuthState(authState);\n      onError && onError(error);\n    };\n\n    firebase.auth().signInWithEmailAndPassword(email, password, setAuthState, callback, expandedOnError);\n  };\n\n  const updateDisplayName = displayName => {\n    return authState.user.updateProfile({\n      displayName: displayName,\n      photoURL: authState.user.photoURL\n    });\n  };\n\n  const updateEmailAddress = email => {\n    authState.user.updateEmail(email);\n  };\n\n  const sendPasswordResetEmail = (email, callback, onError) => firebase.auth().sendPasswordResetEmail(email, callback, onError);\n\n  const sendEmailVerification = (callback, onError) => firebase.auth().sendEmailVerification(callback, onError);\n\n  const userHasOnlyEmailProvider = () => firebase.auth().userHasOnlyEmailProvider();\n\n  return /*#__PURE__*/_jsxDEV(AuthStateContext.Provider, {\n    value: {\n      authState,\n      signOut,\n      signUpWithEmailAndPassword,\n      signInWithEmailAndPassword,\n      updateDisplayName,\n      updateEmailAddress,\n      sendPasswordResetEmail,\n      sendEmailVerification,\n      userHasOnlyEmailProvider\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AuthStateProvider, \"HNbf0DLM3SPF+67TiRkz/Y3uw50=\");\n\n_c = AuthStateProvider;\nexport const useAuthStateContext = () => {\n  _s2();\n\n  return useContext(AuthStateContext);\n};\n\n_s2(useAuthStateContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nconst uiConfig = {\n  // Popup signin flow rather than redirect flow.\n  signInFlow: 'popup',\n  signInSuccessUrl: '/profile',\n  signInOptions: [firebase.auth.EmailAuthProvider.PROVIDER_ID]\n};\nexport const LoginComponent = callback => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"GI472 PWA Chat App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please sign-in:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(StyledFirebaseAuth, {\n      uiConfig: uiConfig,\n      firebaseAuth: firebase.auth()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 3\n  }, this);\n};\n_c2 = LoginComponent;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuthStateProvider\");\n$RefreshReg$(_c2, \"LoginComponent\");","map":{"version":3,"sources":["C:/Users/Kao/Desktop/GI472(ส.)/Visual Studio Code/pwa-course-2022/pwa-course-2022/src/context/FirebaseAuthContextProvider.js"],"names":["React","createContext","useContext","useState","useEffect","firebase","StyledFirebaseAuth","AUTHENTICATION_LOADING","AUTHENTICATED","AUTHENTICATED_ANONYMOUSLY","UNAUTHENTICATED","AUTHENTICATION_FAILED","AuthStateContext","user","state","AuthStateProvider","children","authState","setAuthState","undefined","unregisterAuthObserver","auth","onAuthStateChanged","signOut","signUpWithEmailAndPassword","email","password","name","callback","onError","expandedOnError","error","signInWithEmailAndPassword","updateDisplayName","displayName","updateProfile","photoURL","updateEmailAddress","updateEmail","sendPasswordResetEmail","sendEmailVerification","userHasOnlyEmailProvider","useAuthStateContext","uiConfig","signInFlow","signInSuccessUrl","signInOptions","EmailAuthProvider","PROVIDER_ID","LoginComponent"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { firebase } from \"./FirebaseConfig\";\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nexport const AUTHENTICATION_LOADING = \"AUTHENTICATION_LOADING\";\nexport const AUTHENTICATED = \"AUTHENTICATED\";\nexport const AUTHENTICATED_ANONYMOUSLY = \"AUTHENTICATED_ANONYMOUSLY\";\nexport const UNAUTHENTICATED = \"UNAUTHENTICATED\";\nexport const AUTHENTICATION_FAILED = \"AUTHENTICATION_FAILED\";\n\n\nconst AuthStateContext = createContext({\n  user: {},\n  state: AUTHENTICATION_LOADING\n});\n\nexport default function AuthStateProvider({ children }) {\n\n  const [authState, setAuthState] = useState({\n    user: undefined,\n    state: AUTHENTICATION_LOADING\n  });\n\n  useEffect(() => {\n    const unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\n      \n      setAuthState({\n        user: user,\n        state: user ? AUTHENTICATED : UNAUTHENTICATED\n      });\n    });\n    return () => unregisterAuthObserver();\n    // eslint-disable-next-line\n  }, []);\n\n  const signOut = () => firebase.auth().signOut();\n  const signUpWithEmailAndPassword = (\n    email,\n    password,\n    name,\n    callback,\n    onError\n  ) => {\n    const expandedOnError = error => {\n      // If there is an error with the login we will rollback to the last auth state.\n      setAuthState(authState);\n      onError && onError(error);\n    };\n    firebase.auth().signUpWithEmailAndPassword(\n      email,\n      password,\n      name,\n      setAuthState,\n      callback,\n      expandedOnError\n    );\n  };\n\n  const signInWithEmailAndPassword = (email, password, callback, onError) => {\n    const expandedOnError = error => {\n      // If there is an error with the login we will rollback to the last auth state.\n      setAuthState(authState);\n      onError && onError(error);\n    };\n\n    firebase.auth().signInWithEmailAndPassword(\n      email,\n      password,\n      setAuthState,\n      callback,\n      expandedOnError\n    );\n  };\n\n  const updateDisplayName = (displayName) => {\n    return authState.user.updateProfile({\n    displayName: displayName,\n    photoURL: authState.user.photoURL\n  })};\n  const updateEmailAddress = (email) => {authState.user.updateEmail(email)};\n\n  const sendPasswordResetEmail = (email, callback, onError) => firebase.auth().sendPasswordResetEmail(email, callback, onError);\n  const sendEmailVerification = (callback, onError) => firebase.auth().sendEmailVerification(callback, onError);\n  const userHasOnlyEmailProvider = () => firebase.auth().userHasOnlyEmailProvider();\n\n  return (\n    <AuthStateContext.Provider\n      value={{\n        authState,\n        signOut,\n        signUpWithEmailAndPassword,\n        signInWithEmailAndPassword,\n        updateDisplayName,\n        updateEmailAddress,\n        sendPasswordResetEmail,\n        sendEmailVerification,\n        userHasOnlyEmailProvider\n      }}\n    >\n      {children}\n    </AuthStateContext.Provider>\n  );\n}\n\nexport const useAuthStateContext = () => useContext(AuthStateContext);\n\nconst uiConfig = {\n  // Popup signin flow rather than redirect flow.\n  signInFlow: 'popup',\n  signInSuccessUrl: '/profile',\n  signInOptions: [\n    firebase.auth.EmailAuthProvider.PROVIDER_ID,\n  ],\n};\n\n\n\nexport const LoginComponent = (callback) => {\n  return (\n  <div>\n    <h1>GI472 PWA Chat App</h1>\n    <p>{\"Please sign-in:\"}</p>\n    <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()}/>\n  </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}