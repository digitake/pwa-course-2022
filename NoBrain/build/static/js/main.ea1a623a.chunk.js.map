{"version":3,"sources":["components/Userlist.js","components/App.js","components/Avatar.js","components/Chatline.js","components/Chatbox.js","components/Titlebar.js","components/Inputbox.js","context/FirebaseConfig.js","context/FirebaseChatContextProvider.js","context/FirebaseAuthContextProvider.js","Chat.js","PrivateChat.js","Profile.js","FriendList.js","FriendProfile.js","Router.js","reportWebVitals.js","index.js"],"names":["Userlist","_useState","useState","_useState2","Object","slicedToArray","tryStatus","setTrayStatus","react_default","a","createElement","className","value","onClick","name","react_router_dom","to","App","props","children","components_Userlist","Avatar","base64Image","src","alt","Chatline","text","element","setElement","useEffect","startsWith","html","split","slice","join","dangerouslySetInnerHTML","__html","_text$split","fetch","then","res","json","data","age","_text$split3","gender","transform","Chatbox","myRef","useRef","current","scrollIntoView","map","item","i","ref","key","concat","position","displayName","components_Avatar","image","components_Chatline","msg","Titlebar","_ref","Inputbox","setValue","htmlFor","label","id","type","autoComplete","onChange","e","target","onKeyPress","event","onEnter","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","hashCode","s","reduce","b","charCodeAt","ChatStateContext","createContext","userList","chatroomList","ChatStateProvider","self","usersRef","database","chatroomsRef","imagesRef","setUserList","_useState3","_useState4","userDict","setUserDict","_useState5","_useState6","imageDict","setImageDict","_useState7","_useState8","chat","user","uid","timestamp","ServerValue","TIMESTAMP","on","snapshot","excludeSelf","x","oldList","toConsumableArray","filter","objectSpread","val","oldDict","defineProperty","userId","exclude","newDict","me","child","set","onDisconnect","remove","off","Provider","getUserProfile","once","getPrivateChat","friendId","chatroomId","listenToPrivateChat","callback","sendPrivateMsg","push","getChatroom","roomId","listenToChatroom","console","log","listenToUserInChatroom","sendMsg","targetId","setUserImage","base64Img","getUserImage","useChatStateContext","useContext","AUTHENTICATION_LOADING","AUTHENTICATED","UNAUTHENTICATED","AuthStateContext","state","AuthStateProvider","undefined","authState","setAuthState","unregisterAuthObserver","auth","onAuthStateChanged","signOut","signUpWithEmailAndPassword","email","password","onError","error","signInWithEmailAndPassword","updateDisplayName","updateProfile","photoURL","updateEmailAddress","updateEmail","sendPasswordResetEmail","sendEmailVerification","userHasOnlyEmailProvider","useAuthStateContext","uiConfig","signInFlow","signInSuccessUrl","signInOptions","EmailAuthProvider","PROVIDER_ID","LoginComponent","StyledFirebaseAuth_default","firebaseAuth","Chat","_useChatStateContext","chatData","setChatData","onMsg","oldChat","unsubscribeChatroom","components_App","components_Titlebar","components_Chatbox","Date","now","sort","components_Inputbox","PrivateChat","useParams","friendName","setFriendName","mappedValue","friend","unsubscribePrivateChat","window","scrollTo","Profile","_useAuthStateContext","setName","setBase64Image","imgBase64","build_min_default","multiple","onDone","base64","_","reload","FriendList","FriendProfile","Router","react_router","path","src_Chat","src_PrivateChat","src_Profile","src_FriendList","src_FriendProfile","FirebaseAuthContextProvider_LoginComponent","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","src_Router","document","getElementById","navigator","serviceWorker","register","registration"],"mappings":"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","file":"static/js/main.ea1a623a.chunk.js","sourcesContent":["import { useState } from 'react';\nimport '../css/Userlist.css';\nimport '../css/Tabbar.css';\nimport { Link } from 'react-router-dom';\nimport React from 'react';\n\nfunction Userlist () {\n  const [tryStatus, setTrayStatus] = useState(\"close\");\n\n  function onButtonClicked() {\n    if (tryStatus === 'close'){\n        setTrayStatus('open')\n    }if(tryStatus === 'open')\n    {\n      setTrayStatus('close')\n    }\n  }\n\n  return (\n    <div>\n      <div className={\"userlist \"+tryStatus}> <div className=\"close-button\" value =\"x\" onClick={onButtonClicked}><ion-icon name=\"exit-outline\"></ion-icon></div><div className=\"tabbar\">\n      <Link to=\"/friend-list\" className=\"tabbutton1\">\n      <ion-icon name=\"people-outline\"></ion-icon>\n      </Link>\n      <Link to=\"/chat\" className=\"tabbutton1\">\n      <ion-icon name=\"chatbubble-outline\"></ion-icon>\n      </Link>\n      <Link to=\"/profile\" className=\"tabbutton1\">\n      <ion-icon name=\"person-outline\"></ion-icon>\n      </Link>\n      </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Userlist;","import '../css/App.css';\nimport Userlist from './Userlist.js';\nimport React from 'react';\n\nfunction App(props) {\n  return (\n    <div className=\"App\">\n      <div className=\"content\">\n        {props.children}\n      </div>\n      <Userlist />\n    </div>\n  );\n}\n\nexport default App;\n","import '../css/Avatar.css';\nimport React from 'react';\n\nfunction Avatar(props) {\n  const base64Image = props.base64Image;\n\n  return (\n    <div className=\"avatar\">\n      <img src={base64Image} alt={props.name}/>\n    </div>\n  );\n}\n\nexport default Avatar;","import { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport React from 'react';\n\nfunction Chatline(props) {\n  let text = props.text;\n\n  const [element, setElement] = useState(text);\n\n  function transform(text) {\n    if (text.startsWith(\"/link\")) {\n      setElement(<Link to={text}>{text}</Link>);\n    }\n    else if (text.startsWith(\"/embed\")) {\n      const html = text.split(\" \").slice(1).join(\" \");\n      setElement(<div dangerouslySetInnerHTML={{ __html: html }}></div>);\n    }\n    else if (text.startsWith(\"/age\")) {\n      const [, name] = text.split(\" \");\n      fetch(\"https://api.agify.io/?name=\" + name)\n        .then(res => res.json())\n        .then(data => setElement(data.age));\n    }\n    else if (text.startsWith(\"/gender\")) {\n      const [, name] = text.split(\" \");\n      fetch(\"https://api.genderize.io/?name=\" + name)\n        .then(res => res.json())\n        .then(data => setElement(data.gender));\n    }\n    else if (text.startsWith(\"/randomfact\")) {\n      // ex10-01 here: Implement randomfact using fetch & promise\n      // https://uselessfacts.jsph.pl/random.json?language=en\n\n    }\n  };\n\n  useEffect(() => {\n    transform(text);\n  }, []);\n\n  return (\n    element\n  )\n}\n\nexport default Chatline;","import Avatar from \"./Avatar\";\nimport \"../css/Chatbox.css\";\nimport { useRef, useEffect } from 'react';\nimport Chatline from \"./Chatline\";\nimport React from 'react';\n\nfunction Chatbox (props) {\n  let data = props.data;\n  const myRef = useRef(null)\n\n  useEffect(() => {\n    myRef.current && myRef.current.scrollIntoView()  \n  },[data])\n\n  return (\n    <div className=\"chatbox\">\n      {\n        data.map((item,i) => {\n          return (<div ref={myRef} key={`${item.key}-${i}`} className={`chatbox-item ${item.position}`}>\n            <div>{item.displayName}</div>\n            <Avatar name={item.displayName} base64Image={item.image}/>\n            <div className=\"chatbox-item-text\">\n              <Chatline text={item.msg}/>\n            </div>\n          </div>)\n        })\n      }\n    </div>\n  )\n}\n\nexport default Chatbox;","import '../css/Titlebar.css';\nimport React from 'react';\n\nfunction Titlebar ({value}) {\n  return (\n    <div className=\"titlebar\">\n      {value}\n    </div>\n  )\n}\n\nexport default Titlebar;","import { useState } from \"react\";\nimport React from 'react';\n\nfunction Inputbox (props) {\n  const [value, setValue] = useState(props.value||\"\");\n\n  function handleKeyPress(event) {\n    if(event.key === 'Enter' && value !== \"\"){\n      props.onEnter(value);\n      setValue(\"\");\n    }\n  }\n\n  return (\n    <div className=\"inputbox\">\n      <label className=\"label1\" htmlFor=\"inputmsg\">\n        {props.label}\n      </label>\n      <input\n        id=\"inputmsg\"\n        type=\"text\"\n        className=\"text\"\n        value={value}\n        autoComplete=\"off\"\n        onChange={e => {\n          setValue(e.target.value);\n          props.onChange && props.onChange(e.target.value);\n        }}\n        onKeyPress={handleKeyPress}\n      />\n      <input \n        type=\"button\" \n        value=\"Send\" \n        onClick={() => {\n          props.onEnter(value);\n          setValue(\"\");\n        }}\n        className=\"button\"\n      />    \n    </div>\n  )\n}\n\nexport default Inputbox;","import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/database';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBTqVSZ7AOcVM5TG8lTYhp5FzGlray7iG4\",\n  authDomain: \"nobrain-ead6f.firebaseapp.com\",\n  databaseURL: \"https://nobrain-ead6f-default-rtdb.asia-southeast1.firebasedatabase.app/\",\n  projectId: \"nobrain-ead6f\",\n  storageBucket: \"nobrain-ead6f.appspot.com\",\n  messagingSenderId: \"622184282270\",\n  appId: \"1:622184282270:web:aff8fb8ebc9c5f82d3e38f\",\n  measurementId: \"G-8FX32GR6EH\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport default firebase;","/* eslint-disable no-unused-vars */\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport 'firebase/compat/auth';\nimport 'firebase/compat/database';\nimport firebase from './FirebaseConfig';\n\nconst hashCode = s => s.split('').reduce((a,b) => (((a << 5) - a) + b.charCodeAt(0))|0, 0)\n\nconst ChatStateContext = createContext({\n  userList: [],\n  chatroomList: []\n});\n\nexport default function ChatStateProvider({ children, self }) {\n  const usersRef = firebase.database().ref('users');\n  const chatroomsRef = firebase.database().ref('chatrooms');\n  const imagesRef = firebase.database().ref('images');\n\n  const [userList, setUserList] = useState([]);\n  const [userDict, setUserDict] = useState({});\n  const [imageDict, setImageDict] = useState({});\n  const [chatroomList, setChatroomList] = useState([]);\n\n  const chat = msg => ({ msg: msg, user: self.uid, timestamp: firebase.database.ServerValue.TIMESTAMP });\n\n  const setImage = (imageId, base64Img) => {\n    const x = imagesRef.child(`${imageId}`)\n    x.set(base64Img);\n    return x;\n  };\n\n  const getImage = (imageId) => {\n    return imagesRef.child(`${imageId}`).once('value').then(snapshot => {\n      return snapshot.val();\n    })\n  };\n  \n  useEffect(() => {\n    usersRef.on('child_added', snapshot => {\n      const excludeSelf = x=> x.key !== self.uid;\n      setUserList(oldList => [...oldList.filter(excludeSelf), {\n        ...snapshot.val(),\n        key: snapshot.key\n      }]);\n      setUserDict(oldDict => ({...oldDict, [snapshot.key]: snapshot.val()}));\n    });\n\n    imagesRef.on('child_added', snapshot => {\n      setImageDict(oldDict => ({...oldDict, [snapshot.key]: snapshot.val()}));\n    });\n\n    usersRef.on('child_removed', snapshot => {\n      const userId = snapshot.key;\n      const exclude = x=> x.key !== userId;\n\n      setUserList(oldList => oldList.filter(exclude));\n      setUserDict(oldDict => {\n        const newDict = {...oldDict};\n        delete newDict[userId];\n        return newDict;\n      });\n    });\n\n    imagesRef.on('child_removed', snapshot => {\n      setImageDict(oldDict => {\n        const newDict = {...oldDict};\n        delete newDict[snapshot.key];\n        return newDict;\n      });\n    });\n\n    imagesRef.on('child_changed', snapshot => {\n      setImageDict(oldDict => ({...oldDict, [snapshot.key]: snapshot.val()}));\n    });\n\n    const me = usersRef.child(self.uid)\n    me.set({\n      displayName: self.displayName,\n    })\n    me.onDisconnect().remove();\n\n    return () => {\n      usersRef.off();\n      imagesRef.off()\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const getUserProfile = uid => {\n    return usersRef.child(uid).once('value').then(snapshot => {\n      return snapshot.val();\n    });\n  };\n\n  const setUserImage = (uid, base64Img) => {\n    const x = imagesRef.child(`${uid}`)\n    x.set(base64Img);\n    return x;\n  };\n\n  const getUserImage = (uid) => {\n    return imagesRef.child(`${uid}`).once('value').then(snapshot => {\n      return snapshot.val();\n    })\n  };\n\n  const getPrivateChat = (friendId) => {\n    const chatroomId = `1-1-${hashCode(self.uid) + hashCode(friendId)}`;\n    return chatroomsRef.child(`${chatroomId}`).once('value').then(snapshot => {\n      return snapshot.val();\n    });\n  };\n\n  const listenToPrivateChat = (friendId, callback) => {\n    const chatroomId = `1-1-${hashCode(self.uid) + hashCode(friendId)}`;\n    return chatroomsRef.child(`${chatroomId}/chat`).on('child_added', snapshot => {\n      // {roomTitle, users, chat}\n      snapshot && callback(snapshot.val());\n    });\n  };\n\n  const sendPrivateMsg = (msg, friendId) => {\n    const chatroomId = `1-1-${hashCode(self.uid) + hashCode(friendId)}`;\n    const chatroomRef = chatroomsRef.child(`${chatroomId}/chat`);\n    chatroomRef.push(chat(msg));\n  };\n\n  const getChatroom = (roomId) => {\n    return chatroomsRef.child(`${roomId}`).once('value').then(snapshot => {\n      // {roomTitle, users, chat}\n      return snapshot.val();\n    });\n  };\n\n  const listenToChatroom = (roomId, callback) => {\n    console.log(\"self checkin to roomId\", roomId);\n    const x = chatroomsRef.child(`${roomId}/users/${self.uid}`);\n    x.set({\n      displayName: self.displayName,\n    })\n    x.onDisconnect().remove();\n\n    return chatroomsRef.child(`${roomId}/chat`).on('child_added', snapshot => {\n      // {roomTitle, users, chat}\n      snapshot && callback(snapshot.val());\n    });\n  };\n\n  const listenToUserInChatroom = (roomId, callback) => {\n    const x= chatroomsRef.child(`${roomId}/users`)\n    x.on('child_added', snapshot => {\n      snapshot && callback('JOINED',snapshot.key, snapshot.val());\n    });\n    x.on('child_removed', snapshot => {\n      snapshot && callback('LEFT', snapshot.key, snapshot.val());\n    });\n    return () => {\n      x.off('child_added');\n      x.off('child_removed');\n    }\n  };\n\n  const sendMsg = (msg, targetId) => {\n    const chatroomRef = chatroomsRef.child(`${targetId}/chat`);\n    chatroomRef.push(chat(msg));\n  };\n\n  return (\n    <ChatStateContext.Provider\n      value={{\n        userList: userList,\n        chatroomList: chatroomList,\n        imageDict: imageDict,\n        userDict: userDict,\n        getUserProfile: getUserProfile,\n        getPrivateChat: getPrivateChat,\n        listenToPrivateChat: listenToPrivateChat,\n        sendPrivateMsg: sendPrivateMsg,\n        getChatroom: getChatroom,\n        listenToChatroom: listenToChatroom,\n        listenToUserInChatroom: listenToUserInChatroom,\n        sendMsg: sendMsg,\n        setUserImage: setUserImage,\n        getUserImage: getUserImage\n      }}\n    >\n      {children}\n    </ChatStateContext.Provider>\n  );\n}\n\nexport const useChatStateContext = () => useContext(ChatStateContext);","import React, { createContext, useContext, useState, useEffect } from \"react\";\nimport firebase from \"./FirebaseConfig\";\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nexport const AUTHENTICATION_LOADING = \"AUTHENTICATION_LOADING\";\nexport const AUTHENTICATED = \"AUTHENTICATED\";\nexport const AUTHENTICATED_ANONYMOUSLY = \"AUTHENTICATED_ANONYMOUSLY\";\nexport const UNAUTHENTICATED = \"UNAUTHENTICATED\";\nexport const AUTHENTICATION_FAILED = \"AUTHENTICATION_FAILED\";\n\n\nconst AuthStateContext = createContext({\n  user: {},\n  state: AUTHENTICATION_LOADING\n});\n\nexport default function AuthStateProvider({ children }) {\n\n  const [authState, setAuthState] = useState({\n    user: undefined,\n    state: AUTHENTICATION_LOADING\n  });\n\n  useEffect(() => {\n    const unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\n      \n      setAuthState({\n        user: user,\n        state: user ? AUTHENTICATED : UNAUTHENTICATED\n      });\n    });\n    return () => unregisterAuthObserver();\n    // eslint-disable-next-line\n  }, []);\n\n  const signOut = () => firebase.auth().signOut();\n  const signUpWithEmailAndPassword = (\n    email,\n    password,\n    name,\n    callback,\n    onError\n  ) => {\n    const expandedOnError = error => {\n      // If there is an error with the login we will rollback to the last auth state.\n      setAuthState(authState);\n      onError && onError(error);\n    };\n    firebase.auth().signUpWithEmailAndPassword(\n      email,\n      password,\n      name,\n      setAuthState,\n      callback,\n      expandedOnError\n    );\n  };\n\n  const signInWithEmailAndPassword = (email, password, callback, onError) => {\n    const expandedOnError = error => {\n      // If there is an error with the login we will rollback to the last auth state.\n      setAuthState(authState);\n      onError && onError(error);\n    };\n\n    firebase.auth().signInWithEmailAndPassword(\n      email,\n      password,\n      setAuthState,\n      callback,\n      expandedOnError\n    );\n  };\n\n  const updateDisplayName = (displayName) => {\n    return authState.user.updateProfile({\n    displayName: displayName,\n    photoURL: authState.user.photoURL\n  })};\n  const updateEmailAddress = (email) => {authState.user.updateEmail(email)};\n\n  const sendPasswordResetEmail = (email, callback, onError) => firebase.auth().sendPasswordResetEmail(email, callback, onError);\n  const sendEmailVerification = (callback, onError) => firebase.auth().sendEmailVerification(callback, onError);\n  const userHasOnlyEmailProvider = () => firebase.auth().userHasOnlyEmailProvider();\n\n  return (\n    <AuthStateContext.Provider\n      value={{\n        authState,\n        signOut,\n        signUpWithEmailAndPassword,\n        signInWithEmailAndPassword,\n        updateDisplayName,\n        updateEmailAddress,\n        sendPasswordResetEmail,\n        sendEmailVerification,\n        userHasOnlyEmailProvider\n      }}\n    >\n      {children}\n    </AuthStateContext.Provider>\n  );\n}\n\nexport const useAuthStateContext = () => useContext(AuthStateContext);\n\nconst uiConfig = {\n  // Popup signin flow rather than redirect flow.\n  signInFlow: 'popup',\n  signInSuccessUrl: '/profile',\n  signInOptions: [\n    firebase.auth.EmailAuthProvider.PROVIDER_ID,\n  ],\n};\n\n\n\nexport const LoginComponent = (callback) => {\n  return (\n  <div>\n    <h1>GI472 PWA Chat App</h1>\n    <p>{\"Please sign-in:\"}</p>\n    <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()}/>\n  </div>\n  )\n}","import { useEffect, useState } from 'react';\nimport App from './components/App.js';\nimport Chatbox from './components/Chatbox.js';\nimport Titlebar from './components/Titlebar.js';\nimport Inputbox from './components/Inputbox.js';\nimport './Chat.css';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider';\nimport { useAuthStateContext } from './context/FirebaseAuthContextProvider';\nimport React from 'react';\n\nfunction Chat() {\n  const { sendMsg, listenToChatroom, imageDict, userDict } = useChatStateContext();\n  const { authState } = useAuthStateContext();\n\n  const [chatData, setChatData] = useState([]);\n\n\n  function onMsg(msg) {\n    setChatData(oldChat => [msg, ...oldChat]);\n  }\n\n  function transformChatData(item) {\n    let displayName = \"ไม่ทราบชื่อ(Offline)\";\n    if (item.user in userDict && userDict[item.user].displayName){\n      displayName = userDict[item.user].displayName;\n    } else if (item.user === authState.user.uid) {\n      displayName = authState.user.displayName;\n    }\n    \n    return ({\n      ...item,\n      key: item.timestamp || Date.now(),\n      displayName: displayName,\n      image: imageDict[item.user] || \"\",\n      position: item.user === authState.user.uid ? \"right\" : \"left\"\n    });\n  }\n\n  useEffect(() => {\n    const unsubscribeChatroom = listenToChatroom('mainhall', onMsg);\n\n    return () => {\n      unsubscribeChatroom();\n    }\n  }, []);\n\n\n  return (\n    <App>\n      <div className=\"chat\">\n        <Titlebar value=\"Chat\"/>        \n        <Chatbox data={chatData.map(transformChatData).sort((a,b)=>a.timestamp - b.timestamp)}/>\n        <Inputbox onEnter={x=>sendMsg(x,\"mainhall\")}/>\n      </div>\n    </App>\n  );\n}\n\nexport default Chat;\n","import { useEffect, useState } from 'react';\nimport App from './components/App.js';\nimport Chatbox from './components/Chatbox.js';\nimport Inputbox from './components/Inputbox.js';\nimport Titlebar from './components/Titlebar.js';\nimport './Chat.css';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider';\nimport { useParams } from \"react-router-dom\";\nimport React from 'react';\n\nfunction PrivateChat() {\n  const { uid } = useParams();\n  const { getUserProfile, sendPrivateMsg, listenToPrivateChat } = useChatStateContext();\n  const [ friendName, setFriendName ] = useState(\"\");\n  const [ chatData, setChatData ] = useState([]);\n\n  const onMsg = (msg) => {\n    \n    const mappedValue = {\n      ...msg,\n      key: msg.timestamp || Date.now(),\n      displayName: friendName,\n      position: msg.user === uid ? \"right\" : \"left\"\n    };\n    \n    setChatData(oldChat => [mappedValue, ...oldChat]);\n  }\n\n  useEffect(() => {\n    getUserProfile(uid)\n    .then(friend => {\n      friend && setFriendName(friend.displayName);\n      return friend;\n    })\n\n    const unsubscribePrivateChat = listenToPrivateChat(uid, onMsg);\n\n    return () => {unsubscribePrivateChat()}\n  }, [uid]);\n\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [])\n\n  return (\n    <App>\n      <div className=\"chat\">\n        <Titlebar value={friendName}/>\n        <Chatbox data={chatData}/>\n        <Inputbox onEnter={x=>sendPrivateMsg(x,uid)}/>\n      </div>\n    </App>\n  );\n}\n\nexport default PrivateChat;\n","import App from './components/App.js';\nimport { useState, useEffect } from \"react\";\nimport './Profile.css';\nimport Avatar from './components/Avatar.js';\nimport { useAuthStateContext } from './context/FirebaseAuthContextProvider';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider.js';\nimport FileBase64 from 'react-file-base64';\nimport React from 'react';\n\n\nfunction Profile() {\n  const { authState, updateDisplayName, signOut } = useAuthStateContext();\n  const { setUserImage, getUserImage } = useChatStateContext();\n  const [name, setName] = useState(authState.user.displayName);\n  const [base64Image, setBase64Image] = useState(\"\");\n\n  useEffect(() =>{\n    getUserImage(authState.user.uid).then(imgBase64 => {\n      setBase64Image(imgBase64);\n    })\n  }, []);\n\n  function save() {\n    updateDisplayName(name).then(_=>{\n      authState.user.reload()\n      setUserImage(authState.user.uid, base64Image);\n    });\n  }\n\n  function onDone(data) {\n    setBase64Image(data.base64);\n  }\n\n  return (\n    <App>\n      <div className=\"Profile\">\n        <Avatar name={name} base64Image={base64Image}/>\n        <label className=\"label1\" htmlFor=\"displayname\"/>\n        <input \n          id=\"displayname\"\n          type=\"text\" \n          className=\"text\" \n          value={name}\n          onChange={e => setName(e.target.value)}\n        />\n        <FileBase64\n          multiple={ false }\n          onDone={ onDone } \n        />\n        <input type=\"button\" value=\"Save\" onClick={save}/>\n        <input type=\"button\" onClick={() => signOut()} value=\"Sign-out\"/>\n      </div>\n    </App>\n  );\n}\n\nexport default Profile;","import './FriendList.css';\nimport App from './components/App';\nimport Avatar from './components/Avatar';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider';\nimport { Link } from 'react-router-dom';\nimport React from 'react';\n\nfunction FriendList(){\n  const { userList, imageDict } = useChatStateContext();\n\n  return(\n    <App>\n      <div className=\"friend-list\">\n      {\n        userList.map((item) => {\n          return (\n            <Link to={`/privatechat/${item.key}`} key={item.key}>\n              <div className={`friend-list-item ${item.position}`}>\n                <Avatar name={item.displayName} base64Image={imageDict[item.key]}/>\n                <div>{item.displayName}</div>\n              </div>\n            </Link>\n          )\n        })\n      }\n      </div>\n    </App>\n  )\n}\n\nexport default FriendList;","import App from './components/App.js';\nimport { useState, useEffect} from \"react\";\nimport './Profile.css';\nimport Avatar from './components/Avatar.js';\nimport { useChatStateContext } from './context/FirebaseChatContextProvider';\nimport { useParams } from \"react-router-dom\";\nimport React from 'react';\n\nfunction FriendProfile() {\n  const { uid } = useParams();\n\n  const { getUserProfile } = useChatStateContext();\n  const [ name, setName ] = useState(\"\");\n\n  useEffect(() => {\n    getUserProfile(uid)\n    .then(user => {\n      setName(user.displayName);\n    })\n\n    return () => {}\n  }, [uid,getUserProfile]);\n\n\n  return (\n    <App>\n      <div className=\"Profile\">\n        <Avatar name={name}/>\n        <span>{name}</span>\n      </div>\n    </App>\n  );\n}\n\nexport default FriendProfile;","import {\n  BrowserRouter,\n  Routes,\n  Route\n} from \"react-router-dom\";\nimport React from 'react';\nimport Chat from \"./Chat\";\nimport PrivateChat from \"./PrivateChat\";\nimport Profile from \"./Profile\";\nimport FriendList from \"./FriendList\";\nimport FriendProfile from \"./FriendProfile\";\nimport { useAuthStateContext, LoginComponent } from './context/FirebaseAuthContextProvider';\nimport ChatStateProvider from \"./context/FirebaseChatContextProvider\";\n\n  \nfunction Router() {\n  const { authState } = useAuthStateContext();\n\n  if (authState && authState.state === \"AUTHENTICATION_LOADING\") {\n    return <div>Loading...</div>;\n  }\n  else if (authState && authState.state === \"AUTHENTICATED\") {\n    return (\n        <ChatStateProvider self={authState.user}>\n          <BrowserRouter>\n            <Routes>\n              <Route path=\"/chat\" element={<Chat />}/>\n              <Route path=\"/privatechat/:uid\" element={<PrivateChat />}/>\n              <Route path=\"/profile\" element={<Profile />}/>\n              <Route path=\"/friend-list\" element={<FriendList />}/>\n              <Route path=\"/friend/:uid\" element={<FriendProfile />}/>\n              <Route path=\"/\" element={<Profile />}/>\n            </Routes>\n          </BrowserRouter>\n        </ChatStateProvider>\n      );\n  } else {\n    return <LoginComponent />;\n  }\n}\n\nexport default Router;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Router from './Router';\nimport reportWebVitals from './reportWebVitals';\nimport AuthStateProvider from './context/FirebaseAuthContextProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthStateProvider>\n      <Router />\n    </AuthStateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\nif('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').then(registration => {\n    console.log('SW registered: ', registration);\n  })\n}"],"sourceRoot":""}